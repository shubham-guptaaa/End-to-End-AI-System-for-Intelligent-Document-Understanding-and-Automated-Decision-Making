<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Invoice AI Assistant</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/static/css/invoice.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

<div class="container">
    <h1>Invoice AI Analyzer</h1>
    <p class="subtitle">Upload your invoice and ask a question.</p>

    <label>Upload Invoice (PDF/Image)</label>
    <input type="file" id="file" accept=".pdf,.png,.jpg,.jpeg">

    <label>Your Question</label>
    <input type="text" id="question" placeholder="e.g., What is the invoice number?">

    <button onclick="askAI()">Ask AI</button>

    <p id="loading" class="loader hidden">Analyzing invoice... Please wait.</p>

    <div id="results" class="result-box hidden">
        <h3>Extracted Information</h3>
        <p><b>Invoice Number:</b> <span id="invoice_number"></span></p>
        <p><b>Date:</b> <span id="date"></span></p>
        <p><b>Amount:</b> <span id="amount"></span></p>
        <p><b>Vendor:</b> <span id="vendor"></span></p>
        <p><b>Tax:</b> <span id="tax"></span></p>
        <div id="items-section">
            <b>Items:</b>
            <pre id="items" style="white-space: pre-wrap; margin: 5px 0;"></pre>
        </div>

        <hr style="margin: 20px 0;">

        <h3>Extraction Confidence Visualization</h3>
        <p style="color:#666; font-size:14px;">
            The heatmap shows confidence scores for each extracted field:
            <br>
            <span style="color:#2cba00">■</span> High confidence (80-100%)
            <span style="color:#a3ff00">■</span> Good confidence (60-80%)
            <span style="color:#fff400">■</span> Medium confidence (40-60%)
            <span style="color:#ffa700">■</span> Low confidence (20-40%)
            <span style="color:#ff0000">■</span> Very low confidence (0-20%)
        </p>

        <div class="heatmap-container" style="background: #f5f5f5; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center;">
            <img id="heatmap-img" 
                 style="width: 100%; 
                        max-width: 1000px;
                        display: none;
                        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        border-radius: 4px;"
                 alt="Confidence Heatmap"
                 onerror="console.error('Heatmap failed to load');"
            />
        </div>
    </div>
</div>

<!-- JS -->
<script src="/static/js/invoice.js"></script>

</body>
</html>
